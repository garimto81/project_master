# PRD: AI ìë™ ëª¨ë“œ êµ¬í˜„ (Direct Execution)

**Version**: 1.0
**Date**: 2025-12-29
**Status**: In Progress
**Issue**: #23

---

## Executive Summary

í˜„ì¬ DevFlowì˜ AI ê¸°ëŠ¥ì€ **ë¦¬ë‹¤ì´ë ‰íŠ¸ ëª¨ë“œ**ë¡œë§Œ ë™ì‘í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì™¸ë¶€ AI ì„œë¹„ìŠ¤(Claude, ChatGPT ë“±)ì— ì§ì ‘ ì ‘ì†í•˜ì—¬ í”„ë¡¬í”„íŠ¸ë¥¼ ë³µì‚¬-ë¶™ì—¬ë„£ê¸°í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì´ PRDëŠ” **ìë™ ëª¨ë“œ(Auto Mode)**ë¥¼ êµ¬í˜„í•˜ì—¬ API í‚¤ ì„¤ì • ì‹œ AIê°€ ì§ì ‘ ì½”ë“œë¥¼ ìƒì„±í•˜ê³ , ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™©ì„ í‘œì‹œí•˜ë©°, ì‚¬ìš©ì ìŠ¹ì¸ í›„ ìë™ìœ¼ë¡œ ì»¤ë°‹í•˜ëŠ” ê¸°ëŠ¥ì„ ì •ì˜í•©ë‹ˆë‹¤.

---

## Problem Statement

### í˜„ì¬ ìƒíƒœ

| í•­ëª© | í˜„ì¬ (ë¦¬ë‹¤ì´ë ‰íŠ¸ ëª¨ë“œ) | ëª©í‘œ (ìë™ ëª¨ë“œ) |
|------|----------------------|------------------|
| AI í˜¸ì¶œ | ì‚¬ìš©ìê°€ ì™¸ë¶€ ì„œë¹„ìŠ¤ ì§ì ‘ ë°©ë¬¸ | APIë¡œ ì§ì ‘ í˜¸ì¶œ |
| ì§„í–‰ í‘œì‹œ | ì—†ìŒ (ì‹œë®¬ë ˆì´ì…˜) | SSE ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° |
| ê²°ê³¼ í™•ì¸ | ì‚¬ìš©ìê°€ ì§ì ‘ ë³µì‚¬-ë¶™ì—¬ë„£ê¸° | ìë™ diff ë¯¸ë¦¬ë³´ê¸° |
| ì½”ë“œ ì ìš© | ìˆ˜ë™ | ìŠ¹ì¸ ì‹œ ìë™ ì»¤ë°‹ |
| E2E í…ŒìŠ¤íŠ¸ | 18ê°œ skip | ëª¨ë‘ í†µê³¼ |

### ì˜í–¥ë°›ëŠ” í…ŒìŠ¤íŠ¸

```
ai-cli.spec.ts      - 5 tests (SKIPPED)
ai-resolve.spec.ts  - 4 tests (SKIPPED)
approval.spec.ts    - 5 tests (SKIPPED)
realtime.spec.ts    - 4 tests (SKIPPED)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total               - 18 tests
```

---

## Solution Architecture

### ì‹œìŠ¤í…œ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ì´ìŠˆ ì„ íƒ                                                     â”‚
â”‚       â†“                                                          â”‚
â”‚  2. AI ëª¨ë¸ ì„ íƒ (Claude/GPT/Gemini/Qwen)                        â”‚
â”‚       â†“                                                          â”‚
â”‚  3. "AIë¡œ í•´ê²°" ë²„íŠ¼ í´ë¦­                                         â”‚
â”‚       â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [progress-display]                                       â”‚    â”‚
â”‚  â”‚  ğŸ”´ LIVE  AIê°€ ì½”ë“œë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤                   â”‚    â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%                              â”‚    â”‚
â”‚  â”‚  âœ… ì´ìŠˆ ë¶„ì„ ì™„ë£Œ                                       â”‚    â”‚
â”‚  â”‚  âœ… ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘ ì™„ë£Œ                                    â”‚    â”‚
â”‚  â”‚  ğŸ”„ ì½”ë“œ ìƒì„± ì¤‘...                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [approval-modal]                                         â”‚    â”‚
â”‚  â”‚  AI ìƒì„± ì½”ë“œ ê²€í†                                         â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚    â”‚
â”‚  â”‚  - src/lib/auth.ts                                       â”‚    â”‚
â”‚  â”‚  + export function validateToken() {                     â”‚    â”‚
â”‚  â”‚  +   return token.isValid()                              â”‚    â”‚
â”‚  â”‚  + }                                                     â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚    â”‚
â”‚  â”‚  [ê±°ë¶€] [ìˆ˜ì • ìš”ì²­] [âœ… ìŠ¹ì¸ ë° ì»¤ë°‹]                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API Layer                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  POST /api/ai/resolve (SSE Stream)                               â”‚
â”‚    â†’ { type: "progress", stage: "analyzing", percent: 20 }       â”‚
â”‚    â†’ { type: "progress", stage: "generating", percent: 60 }      â”‚
â”‚    â†’ { type: "code", content: "..." }                            â”‚
â”‚    â†’ { type: "complete", diff: "..." }                           â”‚
â”‚                                                                   â”‚
â”‚  POST /api/ai/approve                                            â”‚
â”‚    â†’ { success: true, commitSha: "abc123" }                      â”‚
â”‚                                                                   â”‚
â”‚  POST /api/ai/reject                                             â”‚
â”‚    â†’ { success: true }                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI Provider APIs                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Claude (Anthropic)  â”‚  GPT-4o (OpenAI)  â”‚  Gemini (Google)     â”‚
â”‚  ANTHROPIC_API_KEY   â”‚  OPENAI_API_KEY   â”‚  GOOGLE_API_KEY      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Functional Requirements

### FR-1: SSE ìŠ¤íŠ¸ë¦¬ë° API

**Endpoint**: `POST /api/ai/resolve`

**Request**:
```typescript
interface AIResolveRequest {
  model: 'claude' | 'gpt-4o' | 'gemini' | 'qwen'
  issue_id: number
  issue_title: string
  issue_body?: string
  prompt?: string
}
```

**SSE Response Events**:
```typescript
// ì§„í–‰ ìƒíƒœ
{ type: 'progress', stage: 'analyzing' | 'generating' | 'ready', percent: number }

// ìƒì„±ëœ ì½”ë“œ (ìŠ¤íŠ¸ë¦¬ë°)
{ type: 'chunk', content: string }

// ì™„ë£Œ
{ type: 'complete', code: string, output: string, resolveId: string }

// ì—ëŸ¬
{ type: 'error', message: string }
```

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­**:
- Text/Event-Stream Content-Type
- ê° ë‹¨ê³„ë³„ ì§„í–‰ë¥  ì „ì†¡ (20%, 40%, 60%, 80%, 100%)
- ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ìŠ¤íŠ¸ë¦¼ ì¢…ë£Œ ë° ì—ëŸ¬ ì´ë²¤íŠ¸ ì „ì†¡
- resolveId ìƒì„±í•˜ì—¬ approve/rejectì—ì„œ ì°¸ì¡°

### FR-2: ì‹¤ì‹œê°„ ì§„í–‰ í‘œì‹œ ì»´í¬ë„ŒíŠ¸

**Component**: `ProgressDisplay`

**data-testid ìš”êµ¬ì‚¬í•­**:
- `progress-display`: ì»¨í…Œì´ë„ˆ
- `live-indicator`: ğŸ”´ LIVE í‘œì‹œ
- `progress-bar`: ì§„í–‰ë¥  ë°”
- `progress-text`: ì§„í–‰ë¥  í…ìŠ¤íŠ¸ (ì˜ˆ: "60%")
- `model-used`: ì‚¬ìš© ì¤‘ì¸ AI ëª¨ë¸ í‘œì‹œ

**ìƒíƒœ í‘œì‹œ**:
| Stage | ì§„í–‰ë¥  | í‘œì‹œ í…ìŠ¤íŠ¸ |
|-------|--------|------------|
| analyzing | 20% | ì´ìŠˆ ë¶„ì„ ì¤‘... |
| context | 40% | ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘ ì¤‘... |
| generating | 60% | ì½”ë“œ ìƒì„± ì¤‘... |
| finalizing | 80% | ê²°ê³¼ ì •ë¦¬ ì¤‘... |
| ready | 100% | ê²€í†  ëŒ€ê¸° |

### FR-3: ìŠ¹ì¸ ëª¨ë‹¬

**Component**: `ApprovalModal`

**data-testid ìš”êµ¬ì‚¬í•­**:
- `approval-modal`: ëª¨ë‹¬ ì»¨í…Œì´ë„ˆ
- `diff-preview`: ì½”ë“œ diff ë¯¸ë¦¬ë³´ê¸°
- `approve-btn`: ìŠ¹ì¸ ë²„íŠ¼
- `reject-btn`: ê±°ë¶€ ë²„íŠ¼
- `edit-request-btn`: ìˆ˜ì • ìš”ì²­ ë²„íŠ¼ (ì„ íƒ)

**ê¸°ëŠ¥**:
- ìƒì„±ëœ ì½”ë“œì™€ ê¸°ì¡´ ì½”ë“œ diff í‘œì‹œ
- ìŠ¹ì¸ ì‹œ `/api/ai/approve` í˜¸ì¶œ
- ê±°ë¶€ ì‹œ `/api/ai/reject` í˜¸ì¶œ ë° ìƒíƒœ ì´ˆê¸°í™”

### FR-4: ìŠ¹ì¸/ê±°ë¶€ API

**Endpoint**: `POST /api/ai/approve`

```typescript
// Request
{ resolveId: string }

// Response
{ success: boolean, commitSha?: string, message: string }
```

**Endpoint**: `POST /api/ai/reject`

```typescript
// Request
{ resolveId: string }

// Response
{ success: boolean }
```

---

## Technical Specifications

### í™˜ê²½ ë³€ìˆ˜

```env
# AI API Keys (í•˜ë‚˜ ì´ìƒ ì„¤ì • í•„ìˆ˜)
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...
GOOGLE_API_KEY=AIza...
DASHSCOPE_API_KEY=sk-...
```

### íŒŒì¼ êµ¬ì¡°

```
frontend/src/
â”œâ”€â”€ app/api/ai/
â”‚   â”œâ”€â”€ resolve/route.ts    # SSE ìŠ¤íŠ¸ë¦¬ë° ì—…ê·¸ë ˆì´ë“œ
â”‚   â”œâ”€â”€ approve/route.ts    # ì‹ ê·œ
â”‚   â””â”€â”€ reject/route.ts     # ì‹ ê·œ
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ProgressDisplay.tsx # ì‹ ê·œ
â”‚   â””â”€â”€ ApprovalModal.tsx   # ì‹ ê·œ (ë˜ëŠ” ê¸°ì¡´ í™•ì¥)
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ sse-client.ts       # SSE í´ë¼ì´ì–¸íŠ¸ ìœ í‹¸ë¦¬í‹°
â””â”€â”€ app/project/page.tsx    # ìë™ ëª¨ë“œ í†µí•©
```

### SSE í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

```typescript
// lib/sse-client.ts
export function subscribeToResolve(
  request: AIResolveRequest,
  callbacks: {
    onProgress: (stage: string, percent: number) => void
    onChunk: (content: string) => void
    onComplete: (result: ResolveResult) => void
    onError: (error: string) => void
  }
): () => void {
  const eventSource = new EventSource('/api/ai/resolve', {
    // POST ìš”ì²­ì„ ìœ„í•œ fetch ê¸°ë°˜ êµ¬í˜„ í•„ìš”
  })

  // ... ì´ë²¤íŠ¸ í•¸ë“¤ë§

  return () => eventSource.close()
}
```

---

## Test Plan

### í™œì„±í™”í•  í…ŒìŠ¤íŠ¸

| íŒŒì¼ | í…ŒìŠ¤íŠ¸ ID | í…ŒìŠ¤íŠ¸ ë‚´ìš© |
|------|----------|------------|
| ai-cli.spec.ts | CLI-E01 | ëª¨ë¸ ì„ íƒ ë“œë¡­ë‹¤ìš´ |
| ai-cli.spec.ts | CLI-E02 | Claudeë¡œ ì´ìŠˆ í•´ê²° |
| ai-cli.spec.ts | CLI-E03 | GPTë¡œ ì´ìŠˆ í•´ê²° |
| ai-cli.spec.ts | CLI-E04 | Geminië¡œ ì´ìŠˆ í•´ê²° |
| ai-cli.spec.ts | CLI-E05 | Qwenìœ¼ë¡œ ì´ìŠˆ í•´ê²° |
| ai-resolve.spec.ts | AI-E01 | AIë¡œ í•´ê²° ë²„íŠ¼ í´ë¦­ |
| ai-resolve.spec.ts | AI-E02 | ì‹¤ì‹œê°„ ì§„í–‰ í‘œì‹œ |
| ai-resolve.spec.ts | AI-E03 | ìŠ¹ì¸ í”Œë¡œìš° |
| ai-resolve.spec.ts | AI-E04 | ë¡¤ë°± ê¸°ëŠ¥ (ê±°ë¶€) |
| approval.spec.ts | AP-E01 | ìŠ¹ì¸ ëª¨ë‹¬ í‘œì‹œ |
| approval.spec.ts | AP-E02 | Diff ë¯¸ë¦¬ë³´ê¸° |
| approval.spec.ts | AP-E03 | ìŠ¹ì¸ ë²„íŠ¼ |
| approval.spec.ts | AP-E04 | ê±°ë¶€ ë²„íŠ¼ |
| approval.spec.ts | AP-E05 | ìˆ˜ì • ìš”ì²­ ë²„íŠ¼ |
| realtime.spec.ts | RT-E01 | ğŸ”´ LIVE í‘œì‹œ |
| realtime.spec.ts | RT-E02 | ì§„í–‰ ë°” ì• ë‹ˆë©”ì´ì…˜ |
| realtime.spec.ts | RT-E03 | ë‹¨ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ |
| realtime.spec.ts | RT-E04 | ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤í¬ë¡¤ |

### í…ŒìŠ¤íŠ¸ Mock ì „ëµ

E2E í…ŒìŠ¤íŠ¸ì—ì„œ ì‹¤ì œ AI APIë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡:

```typescript
// playwright.config.ts ë˜ëŠ” í…ŒìŠ¤íŠ¸ setup
process.env.MOCK_AI_API = 'true'
```

```typescript
// route.ts
if (process.env.MOCK_AI_API === 'true') {
  // Mock ì‘ë‹µ ë°˜í™˜
  return mockSSEResponse(model, issue_id)
}
```

---

## Acceptance Criteria

- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì‹œ ìë™ ëª¨ë“œ í™œì„±í™”
- [ ] SSEë¡œ ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ìŠ¤íŠ¸ë¦¬ë°
- [ ] progress-displayì— ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ
- [ ] AI ì‘ë‹µ ì™„ë£Œ ì‹œ approval-modal ìë™ í‘œì‹œ
- [ ] diff ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
- [ ] ìŠ¹ì¸ ì‹œ ê²°ê³¼ ì €ì¥ (ì»¤ë°‹ì€ Phase 2)
- [ ] ê±°ë¶€ ì‹œ ìƒíƒœ ì´ˆê¸°í™”
- [ ] 18ê°œ skipped í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼
- [ ] ë¹Œë“œ ë° ë¦°íŠ¸ í†µê³¼

---

## Implementation Phases

### Phase 1: ì½”ë“œë² ì´ìŠ¤ ë° í…ŒìŠ¤íŠ¸ ìš”êµ¬ì‚¬í•­ ë¶„ì„
- ê¸°ì¡´ AI ê´€ë ¨ ì½”ë“œ êµ¬ì¡° ë¶„ì„
- 18ê°œ skipped í…ŒìŠ¤íŠ¸ ìš”êµ¬ì‚¬í•­ íŒŒì•…
- í•„ìš”í•œ data-testid ë° API ì‘ë‹µ í˜•ì‹ ì •ë¦¬

### Phase 1.5: PRD ë¬¸ì„œ ì‘ì„±
- ì´ ë¬¸ì„œ (`0006-prd-ai-auto-mode.md`) ì‘ì„±
- ê¸°ìˆ  ëª…ì„¸ ë° êµ¬í˜„ ê³„íš ì •ì˜

### Phase 2: SSE ìŠ¤íŠ¸ë¦¬ë° /api/ai/resolve ì—”ë“œí¬ì¸íŠ¸ ì—…ê·¸ë ˆì´ë“œ
- ê¸°ì¡´ JSON ì‘ë‹µì„ SSE ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ë³€í™˜
- ì§„í–‰ ë‹¨ê³„ë³„ ì´ë²¤íŠ¸ ì „ì†¡ (analyzing, generating, ready)
- resolveId ìƒì„± ë° ë°˜í™˜

### Phase 3: progress-display ì»´í¬ë„ŒíŠ¸ ì‹¤ì‹œê°„ ì—°ë™
- `ProgressDisplay` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- SSE í´ë¼ì´ì–¸íŠ¸ (`lib/sse-client.ts`) êµ¬í˜„
- ì‹¤ì‹œê°„ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ ì—°ë™

### Phase 4: approval-modal í•¸ë“¤ëŸ¬ êµ¬í˜„
- `ApprovalModal` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„/í™•ì¥
- approve/reject ë²„íŠ¼ onClick í•¸ë“¤ëŸ¬ êµ¬í˜„
- diff ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ

### Phase 5: /api/ai/approve, /api/ai/reject ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- `POST /api/ai/approve` êµ¬í˜„
- `POST /api/ai/reject` êµ¬í˜„
- resolveId ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬

### Phase 6: 18ê°œ skipped í…ŒìŠ¤íŠ¸ í™œì„±í™”
- `ai-cli.spec.ts` - 5ê°œ í…ŒìŠ¤íŠ¸ `.skip` ì œê±°
- `ai-resolve.spec.ts` - 4ê°œ í…ŒìŠ¤íŠ¸ `.skip` ì œê±°
- `approval.spec.ts` - 5ê°œ í…ŒìŠ¤íŠ¸ `.skip` ì œê±°
- `realtime.spec.ts` - 4ê°œ í…ŒìŠ¤íŠ¸ `.skip` ì œê±°
- Mock API ì„¤ì •

### Phase 7: E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ìµœì¢… ê²€ì¦
- `npx playwright test` ì „ì²´ ì‹¤í–‰
- 69ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼ í™•ì¸
- ë¹Œë“œ ë° ë¦°íŠ¸ ê²€ì¦

---

## Risks & Mitigations

| ë¦¬ìŠ¤í¬ | ì˜í–¥ | ì™„í™” ë°©ì•ˆ |
|--------|------|----------|
| AI API ë¹„ìš© | í…ŒìŠ¤íŠ¸ ë¹„ìš© ì¦ê°€ | Mock API ì‚¬ìš© |
| API í‚¤ ë…¸ì¶œ | ë³´ì•ˆ ìœ„í—˜ | ì„œë²„ ì‚¬ì´ë“œ ì „ìš©, í™˜ê²½ ë³€ìˆ˜ |
| SSE ë¸Œë¼ìš°ì € í˜¸í™˜ì„± | ì¼ë¶€ ë¸Œë¼ìš°ì € ë¯¸ì§€ì› | fetch ê¸°ë°˜ í´ë°± êµ¬í˜„ |
| ê¸´ ì‘ë‹µ ì‹œê°„ | UX ì €í•˜ | íƒ€ì„ì•„ì›ƒ ë° ì·¨ì†Œ ê¸°ëŠ¥ |

---

## Related Documents

- Issue: #23
- Main PRD: `0005-prd-devflow-ai-collaboration.md`
- Test Plan: `0004-tdd-test-plan.md`
